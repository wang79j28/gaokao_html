{"version":3,"sources":["webpack:///./src/components/common/js/http.js","webpack:///./src/components/common/js/config.js","webpack:///./src/components/common/js/oauth.js"],"names":["httpClient","method","url","data","successfun","errorfun","timeout","_config_js__WEBPACK_IMPORTED_MODULE_0__","a","auth","sessionStorage","Authorization","httpUrl","b","$","ajax","type","context","headers","Content-Type","Origin","location","protocol","host","Access-Control-Request-Method","Access-Control-Request-Headers","success","response","status","xhr","error","errorType","httpGet","httpPost","getUrl","htmlfile","pathStr","pathname","substring","lastIndexOf","SERVICE_URL","DEFAULT_TIMEOUT","o","t","n","window","navigator","userAgent","toLowerCase","match","attr","removeAttr","Object","_http_js__WEBPACK_IMPORTED_MODULE_0__","search","replace","getUrlNumber","GetOauthUrlNumber","parseInt","stop","document","execCommand","reload","console","log","call","this"],"mappings":"8MAIA,SAAAA,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GACA,GAAAJ,EAAA,CACAE,IAAmBA,EAAA,cACnBC,IAAiBA,EAAA,cACjBC,IAAgBA,EAAAC,EAAAC,GAChB,IAAAC,EAAAC,eAAAC,cACAC,EAAAL,EAAAM,EAAAX,EACAY,EAAAC,MACAC,KAAAf,EACAC,IAAAU,EACAT,OACAG,UACAW,QAAAH,EAAA,QACAI,SAAYC,eAAA,mBAAAC,OAAAC,SAAAC,SAAA,KAAAD,SAAAE,KAAAC,gCAAAvB,EAAAwB,iCAAA,8EAAAd,cAAAF,GACZiB,QAAA,SAAAC,EAAAC,EAAAC,GACAzB,EAAAuB,EAAAC,EAAAC,IAEAC,MAAA,SAAAD,EAAAE,EAAAD,GACAzB,EAAAwB,EAAAE,EAAAD,OAKA,SAAAE,EAAA9B,EAAAC,EAAAC,EAAAC,EAAAC,GACAN,EAAA,MAAAE,EAAAC,EAAAC,EAAAC,EAAAC,GAGA,SAAA2B,EAAA/B,EAAAC,EAAAC,EAAAC,EAAAC,GACAN,EAAA,OAAAE,EAAAC,EAAAC,EAAAC,EAAAC,GAWA,SAAA4B,EAAAC,GACA,IAAAC,EAAAf,SAAAgB,SAGA,OAFAD,IAAAE,UAAA,EAAAF,EAAAG,YAAA,MACAlB,SAAAC,SAAA,KAAAD,SAAAE,KAAAa,EAAAD,qHC9CA,MAAAK,EAAA,sBACAC,EAAA,cAAAC,EAAAC,EAAAC,GAAA,uBAAAF,GAAA,IAAAC,EAAAC,EAAA,GCoCA,kBADAC,OAAAC,UAAAC,UAAAC,cACAC,MAAA,oBACAnC,EAAA,QAAAoC,KAAA,yBApCA,WAEA,GADAxC,eAAAC,cA4BAG,EAAA,QAAAqC,WAAA,aA3BA,CACA,IAAAjD,EAAAkD,OAAAC,EAAA7C,EAAA4C,CAAA,cAAA/B,SAAAgB,SAAAhB,SAAAiC,QACAF,OAAAC,EAAAxC,EAAAuC,CAAA,4BACIlD,OACJ,SAAAyB,GACAkB,OAAAxB,SAAAkC,QAAA5B,IAEA,SAAAE,EAAAb,GACA,IAAAwC,EAAA9C,eAAA+C,mBAEAD,EADAA,EACAE,SAAAF,GAAA,EAGA,GAGA,EACAX,OAAAc,KAAAd,OAAAc,OAAAC,SAAAC,YAAA,SAGAnD,eAAA+C,kBAAAD,EACAX,OAAAxB,SAAAyC,aAvBA,KAuCAC,QAAAC,IAAA,eACAnB,OAAAc,KAAAd,OAAAc,OAAAC,SAAAC,YAAA,WAAAI,KAAAC,KAAAtB,EAAA,eAAAF,EAAAC","file":"js/commons-df3eef.bundle.js","sourcesContent":["import { SERVICE_URL, DEFAULT_TIMEOUT } from './config.js';\r\n\r\n\r\n\r\nfunction httpClient(method, url, data, successfun, errorfun, timeout) {\r\n\tif (!url) { return; }\r\n\tif (!successfun) { successfun = function () { } }\r\n\tif (!errorfun) { errorfun = function () { } }\r\n\tif (!timeout) { timeout = DEFAULT_TIMEOUT; }\r\n\tvar auth = sessionStorage.Authorization;\r\n\tvar httpUrl = SERVICE_URL + url;\r\n\t$.ajax({\r\n\t\ttype: method,\r\n\t\turl: httpUrl,\r\n\t\tdata: data,\r\n\t\ttimeout: timeout,\r\n\t\tcontext: $('body'),\r\n\t\theaders: { 'Content-Type': 'application/json', 'Origin': location.protocol + \"//\" + location.host, 'Access-Control-Request-Method': method, 'Access-Control-Request-Headers': 'origin, content-type, accept, authorization, Pragma, Cache-control, Expires', 'Authorization': auth },\r\n\t\tsuccess: function (response, status, xhr) {\r\n\t\t\tsuccessfun(response, status, xhr);\r\n\t\t},\r\n\t\terror: function (xhr, errorType, error) {\r\n\t\t\terrorfun(xhr, errorType, error);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport function httpGet(url, data, successfun, errorfun, timeout) {\r\n\thttpClient('GET', url, data, successfun, errorfun, timeout);\r\n}\r\n\r\nexport function httpPost(url, data, successfun, errorfun, timeout) {\r\n\thttpClient('POST', url, data, successfun, errorfun, timeout);\r\n}\r\n\r\nexport function httpPut(url, data, successfun, errorfun, timeout) {\r\n\thttpClient('PUT', url, data, successfun, errorfun, timeout);\r\n}\r\n\r\nexport function httpDelete(url, data, successfun, errorfun, timeout) {\r\n\thttpClient('DELETE', url, data, successfun, errorfun, timeout);\r\n}\r\n\r\nexport function getUrl(htmlfile){\r\n\tvar pathStr = location.pathname;\r\n\tpathStr = pathStr.substring(0, pathStr.lastIndexOf(\"/\"));\r\n\tvar url = location.protocol+\"//\"+location.host+pathStr+htmlfile;\r\n\treturn url;\r\n}\r\n","export const SERVICE_URL= \"http://47.93.252.67\";\r\nexport const DEFAULT_TIMEOUT= 1000*30","import {httpGet, httpPost, getUrl} from './http.js';\r\n\r\nfunction oauth(){\r\n\tvar auth = sessionStorage.Authorization;\r\n\tif(!auth){\r\n\t\tvar url = getUrl(\"/code.html#\"+location.pathname+location.search);\r\n\t\thttpGet('/wechat/portal/oauth/url', \r\n\t\t\t{url: url}, \r\n\t\t\tfunction(response){\r\n\t\t\t\twindow.location.replace(response);\r\n\t\t\t}, \r\n\t\t\tfunction(xhr,type){\r\n\t\t\t\tvar getUrlNumber = sessionStorage.GetOauthUrlNumber;\r\n\t\t\t\tif(getUrlNumber){\r\n\t\t\t\t\tgetUrlNumber = parseInt(getUrlNumber) + 1;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tgetUrlNumber = 1;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(getUrlNumber > 3){\r\n\t\t\t\t\twindow.stop ? window.stop() : document.execCommand(\"Stop\");\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tsessionStorage.GetOauthUrlNumber = getUrlNumber;\r\n\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n   else{\r\n\t   // normal\r\n\t   $('body').removeAttr('style');  \r\n   }\t\r\n//}\r\n}   \r\n\r\nvar ua = window.navigator.userAgent.toLowerCase(); \r\nif (ua.match(/MicroMessenger/i) == 'micromessenger') { \r\n\t$('body').attr('style', 'display: none');\r\n\toauth();\r\n} else { \r\n  console.log('Not Weixin!');\r\n  window.stop ? window.stop() : document.execCommand(\"Stop\");\r\n} \r\n\r\n\r\n"],"sourceRoot":""}