{"version":3,"sources":["webpack:///./src/components/code-component/code.js"],"names":["history","pushState","window","onpopstate","qs","Object","_common_js_http_js__WEBPACK_IMPORTED_MODULE_0__","a","code","c","response","sessionStorage","Authorization","token","url","location","hash","substr","indexOf","substring","search","replace","RegExp","$","param","xhr","errorType","error","status","JSON","parse","responseText","b"],"mappings":"uHAEAA,QAAAC,UAAA,gBACAC,OAAAC,WAAA,WACAH,QAAAC,UAAA,iBAEA,IAAAG,EAAAC,OAAAC,EAAAC,EAAAF,GAEAD,EAAAI,MACAH,OAAAC,EAAAG,EAAAJ,CAAA,oCACGG,KAAAJ,EAAAI,MACH,SAAAE,GACAC,eAAAC,cAAAF,EAAAG,aACAT,EAAAI,KACA,IAAAM,EAAAC,SAAAC,KAAAC,OAAA,GACAH,EAAAI,QAAA,UACAJ,IAAAK,UAAA,EAAAL,EAAAI,QAAA,OAGAJ,EAAAM,OAAA,iBACAN,IAAAO,QAAA,IAAAC,OAAA,iCAGAR,IAAA,IAAAS,EAAAC,MAAApB,GACAF,OAAAa,SAAAM,QAAAP,IAEA,SAAAW,EAAAC,EAAAC,GACA,QAAAF,EAAAG,OAAA,CAEAjB,eAAAC,cAAAiB,KAAAC,MAAAL,EAAAM,cAAAlB,MAEA,IAAAC,EAAAT,OAAAC,EAAA0B,EAAA3B,CAAA,eACAH,OAAAa,SAAAM,QAAAP","file":"js/code-f24bda.bundle.js","sourcesContent":["import { httpGet, httpPost, getUrl, getQueryString } from '../common/js/http.js';\r\n\r\nhistory.pushState(null, null, null);\r\nwindow.onpopstate = function(){\r\n\thistory.pushState(null, null, null);\r\n};\r\nvar qs = getQueryString();\r\n\r\nif (qs['code']) {\r\n\thttpGet('/wechat/portal/oauth/accesstoken',\r\n\t\t{ code: qs['code'] },\r\n\t\tfunction (response) {\r\n\t\t\tsessionStorage.Authorization = response.token;\r\n\t\t\tdelete qs['code'];\r\n\t\t\tvar url = location.hash.substr(1)\r\n\t\t\tif (url.indexOf('?') >= 0) {\r\n\t\t\t\turl = url.substring(0, url.indexOf('?'));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(url.search(/index.html/i)){\r\n\t\t\t\turl = url.replace(new RegExp('index.html',\"igm\"), 'pay.html');\r\n\t\t\t}\r\n\r\n\t\t\turl = url + \"?\" + $.param(qs);\r\n\t\t\twindow.location.replace(url);\r\n\t\t},\r\n\t\tfunction (xhr, errorType, error) {\r\n\t\t\tif (xhr.status == 401) {\r\n\t\t\t\t//alert(\"status:\" + xhr.status + \", responseText:\" + xhr.responseText + \", token:\" + JSON.parse(xhr.responseText).token);\r\n\t\t\t\tsessionStorage.Authorization = JSON.parse(xhr.responseText).token;\r\n\t\t\t\t\r\n\t\t\t\tvar url = getUrl(\"/index.html\");\r\n\t\t\t\twindow.location.replace(url);\r\n\t\t\t}\r\n\t\t});\r\n}"],"sourceRoot":""}