{"version":3,"sources":["webpack:///./src/components/fillschool-component/fillschool.js"],"names":["getSelectSchools","item_type","schools","$","forEach","item","index","array","prop","schId","attr","schName","selType","push","professionalListAppend","tpl","html","replace","RegExp","proName","append","window","doReady","each","console","log","this","on","e","removeClass","addClass","removeAttr","toggle","fillId","Object","_common_js_http_js__WEBPACK_IMPORTED_MODULE_6__","a","c","response","body","sprintList","itemAppend","rationalList","endList","xhr","type","setTimeout","location","reload","loading","weui_js__WEBPACK_IMPORTED_MODULE_1___default","sprintSchools","rationalSchools","endSchools","fillSchools","concat","d","JSON","stringify","hide","errorType","error","status","template_id","item_class","response_item","id","memo","last","after","text","call"],"mappings":"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","file":"js/fillschool-2ab331.bundle.js","sourcesContent":["\r\nimport 'weui';\r\nimport weui from 'weui.js';\r\nimport '../common/style/app.css';\r\n\r\nimport LabaGif from '../common/images/laba.gif';\r\nimport LabaPng from '../common/images/laba.png';\r\nimport audioControl from '../common/js/audio.js';\r\nimport { httpPost, httpGet, getUrl, getQueryString } from '../common/js/http.js';\r\nimport '../common/js/oauth.js';\r\nimport '../common/js/tabbar.js';\r\n\r\n\r\nwindow.doReady = function () {\r\n    $('.weui-navbar__item').each(function (index) {\r\n        console.log('%d is: %o', index, this)\r\n        $(this).on('click', function (e) {\r\n            //\r\n            $('.weui-navbar__item').each(function (index) {\r\n                $(this).removeClass(\"weui-bar__item_on\")\r\n                $(\".\" + ($(this).attr('id'))).attr(\"style\", \"display:none\")//\r\n            })\r\n            $(this).addClass(\"weui-bar__item_on\")\r\n            $(\".\" + ($(this).attr('id'))).removeAttr(\"style\")\r\n        })\r\n    });\r\n\r\n\r\n    $('#my-layer-0').on('click', function () {\r\n        $('#my-layer-0').toggle();\r\n    });\r\n\r\n\r\n    var qs = getQueryString();\r\n\r\n    var fillId = (qs['fillId']);\r\n    // var fillId = 'FR201805097';\r\n    httpGetMatchSchoolInfo(fillId);\r\n\r\n    /////next//////\r\n    $('#formSubmitBtn').on('click', function (e) {\r\n\r\n        //\r\n        var loading = weui.loading('提交中...');\r\n\r\n        var sprintSchools = getSelectSchools('sprint-checkbox');\r\n        var rationalSchools = getSelectSchools('rational-checkbox');\r\n        var endSchools = getSelectSchools('end-checkbox');\r\n\r\n        var fillSchools = sprintSchools.concat(rationalSchools).concat(endSchools);\r\n        //alert(JSON.stringify(fillObject));\r\n\r\n        httpPost('/fill/school/' + fillId,\r\n            JSON.stringify(fillSchools),\r\n            function (response) {\r\n                // sessionStorage.FillCount = response['body'].fillCount;\r\n                // window.location.replace('fillschool.html');\r\n                loading.hide();\r\n                window.location.replace('fillschoollist.html?fillId=' + fillId);\r\n            },\r\n            function (xhr, errorType, error) {\r\n                if (xhr.status == 401) {\r\n                    window.location.replace('pay.html');\r\n                }\r\n            });\r\n\r\n\r\n    });\r\n}\r\n\r\nfunction getSelectSchools(item_type) {\r\n    var schools = [];\r\n    $('.' + item_type).forEach(function (item, index, array) {\r\n        if ($(item).prop(\"checked\")) {\r\n            var schId = $(item).attr('schId');\r\n            var schName = $(item).attr('schName');\r\n            var selType = $(item).attr('selType');\r\n            if (schId != null && schName != null) {\r\n                schools.push({\r\n                    \"schId\": schId,\r\n                    \"schName\": schName,\r\n                    \"selType\": selType\r\n                });\r\n            }\r\n        }\r\n\r\n    });\r\n    return schools;\r\n}\r\n\r\nfunction httpGetMatchSchoolInfo(fillId) {\r\n    httpGet('/school',\r\n        { fillId: fillId },\r\n        function (response) {\r\n            //JSON.stringify\r\n\r\n            if (response['body']) {\r\n                (response['body']['sprintList']).forEach(function (item, index, array) {\r\n                    itemAppend(fillId, 'sprint-item-template', 'sprint-item', item, '10');\r\n                });\r\n                (response['body']['rationalList']).forEach(function (item, index, array) {\r\n                    itemAppend(fillId, 'rational-item-template', 'rational-item', item, '11');\r\n                });\r\n                (response['body']['endList']).forEach(function (item, index, array) {\r\n                    itemAppend(fillId, 'end-item-template', 'end-item', item, '12');\r\n                });\r\n            }\r\n        },\r\n        function (xhr, type) {\r\n            setTimeout(function () {\r\n                window.location.reload();\r\n            }, 5000);\r\n        });\r\n}\r\n\r\nfunction professionalListAppend(item) {\r\n    var tpl = $('#professional-list-template').html();\r\n    tpl = tpl.replace(new RegExp('#name', \"igm\"), item['proName']);\r\n    $('#my-layer-1').append(tpl);\r\n}\r\n\r\nvar index = 0;\r\nfunction itemAppend(fillId, template_id, item_class, response_item, type) {\r\n    var item = $('#' + template_id).html();\r\n    var id = index++;\r\n    item = item.replace(new RegExp('#id', \"igm\"), id);\r\n    item = item.replace(new RegExp('#name', \"igm\"), response_item['schName']);\r\n    var memo = response_item['memo'];\r\n    memo = memo == '' ? '无' : memo;\r\n    item = item.replace(new RegExp('#detail', \"igm\"), memo);\r\n\r\n    $('.' + item_class).last().after(item);\r\n\r\n    $('#' + id).attr({ schId: response_item['schId'], schName: response_item['schName'], selType: type });\r\n\r\n    $('#label-' + id).on('click', function (e) {\r\n        httpGet('/school/professional',\r\n            {\r\n                schId: response_item['schId'],\r\n                fillId: fillId\r\n            },\r\n            function (response) {\r\n                // weui.alert(JSON.stringify(response));\r\n                $('#my-layer-1').text('');\r\n                if (response['body']) {\r\n                    (response['body']['sprintList']).forEach(function (item, index, array) {\r\n                        professionalListAppend(item);\r\n                    });\r\n                    (response['body']['rationalList']).forEach(function (item, index, array) {\r\n                        professionalListAppend(item);\r\n                    });\r\n                    (response['body']['endList']).forEach(function (item, index, array) {\r\n                        professionalListAppend(item);\r\n                    });\r\n                    $('#my-layer-0').toggle(true);\r\n                }\r\n\r\n            },\r\n            function (xhr, type) {\r\n                setTimeout(function () {\r\n                    window.location.reload();\r\n                }, 5000);\r\n            });\r\n    });\r\n}\r\n"],"sourceRoot":""}