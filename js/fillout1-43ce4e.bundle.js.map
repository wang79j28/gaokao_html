{"version":3,"sources":["webpack:///./src/components/fillout1-component/fillout1.js"],"names":["area_number","professional_number","regions","professionals","item_click","item_class","func","$","each","index","this","on","e","id","label","hasClass","console","log","pid","pname","cid","cname","length","value","children","push","attr","onClick","professionalOnClick","closest","remove","text","size","get_area_number","get_professional_number","item_append","type","template_id","item_click_class","maps","item","html","forEach","key","map","replace","RegExp","last","after","get","region","citys","cidx","getCityIndex","splice","idx","httpGetInfo","typeId","select","Object","_common_js_http_js__WEBPACK_IMPORTED_MODULE_6__","c","response","body","typeVals","array","valVal","valId","appendTo","xhr","name","m","Map","set","Date","getTime","val","i","weui_js__WEBPACK_IMPORTED_MODULE_2___default","a","picker","className","container","defaultValue","onChange","result","onConfirm","actionSheet","onClose","form","validate","error","showErrorTips","ele","msg","checkIfBlur","self","setInterval","call","t"],"mappings":"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","file":"js/fillout1-43ce4e.bundle.js","sourcesContent":["import '../common/style/app.css';\r\nimport 'weui';\r\nimport weui from 'weui.js';\r\n\r\nimport LabaGif from '../common/images/laba.gif';\r\nimport LabaPng from '../common/images/laba.png';\r\nimport audioControl from '../common/js/audio.js';\r\nimport { httpPost, httpGet, getUrl } from '../common/js/http.js';\r\nimport '../common/js/oauth.js';\r\nimport '../common/js/tabbar.js';\r\n\r\n// sessionStorage.Authorization = 'eyJhbGciOiJIUzUxMiJ9.eyJqdGkiOiJvSU9xczBkNldTXzYtLTQxczhoYjlXMS1jaTZFIiwiaWF0IjoyMDA5MjE0MzQzOTA4LCJzdWIiOiI5X21ITjhHSnhBUk5NR1c5YW52T244Z2xmYzRDenVZdWE5Nk1xWmVTSFA0aWJlcEpYc3lWRWpRLVVPOFNzc2pUODBQZXYwVmdFREl0YTVMMXBqWHVEWTBmZ3VMZHFfYm1HdzFkbi1BZnFkNTJNIiwiaXNzIjoiZ2Fva2FvenkifQ.d1Ov_MuTR-enTPlrZm6XU3A7Mzue81GwcEBT5lyfRiXElAtvZ3oIkxEg112hpy97qmPsCrpM9QM0m_Ra05Qj3Q';\r\n\r\nvar regions = [];\r\nvar professionals = [];\r\nvar area_number;\r\nvar professional_number;\r\n$(function () {\r\n\t// if (process.env.NODE_ENV !== 'production') {\r\n\t// console.log('Looks like we are in development mode!');\r\n\t// alert('development Ready to Zepto!') \r\n\t// }\r\n\t// else{\r\n\t// alert('production Ready to Zepto!') \r\n\t// }\t\r\n\titem_click('area-btn', area_number);\r\n\titem_click('professional-btn', professional_number);\r\n\thttpGetRegionInfo();\r\n\thttpGetProfessionalInfo();\r\n\t$('#area-list').on('click', function (e) {\r\n\t\tif (get_area_number() >= 6) return;\r\n\r\n\t\tweui.picker(regions, {\r\n\t\t\tclassName: 'custom-classname',\r\n\t\t\tcontainer: 'body',\r\n\t\t\tdefaultValue: [1, 3],\r\n\t\t\tonChange: function (result) {\r\n\t\t\t\tconsole.log(result)\r\n\t\t\t},\r\n\t\t\tonConfirm: function (result) {\r\n\t\t\t\tconsole.log(result)\r\n\t\t\t\t// $('#school-name').text(result[1].label)\r\n\t\t\t\tarea_list_click(result[0].value, result[0].label, result[1].value, result[1].label);\r\n\t\t\t},\r\n\t\t\tid: 'doubleLinePicker'\r\n\t\t});\r\n\t});\r\n\r\n\t$('#professional-list').on('click', function (e) {\r\n\t\tif (get_professional_number() >= 6) return;\r\n\t\tweui.actionSheet(professionals, [\r\n\t\t\t{\r\n\t\t\t\tlabel: '取消',\r\n\t\t\t\tonClick: function () {\r\n\t\t\t\t\tconsole.log('取消');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t], {\r\n\t\t\t\tclassName: 'custom-classname',\r\n\t\t\t\tonClose: function () {\r\n\t\t\t\t\tconsole.log('关闭');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t});\r\n\r\n\t// observe all clicks inside #content:\r\n\t$('#formSubmitBtn').on('click', function (e) {\r\n\t\t//\r\n\r\n\t\t//weui.form.showErrorTips({ele: document.getElementById(\"zhuanyie\"),msg: 'empty'});\r\n\t\t//return;\r\n\t\tweui.form.validate('#fillout1-form', function (error) {\r\n\t\t\tif (!error) {\r\n\t\t\t\t// var loading = weui.loading('提交中...');\r\n\t\t\t\t// setTimeout(function () {\r\n\t\t\t\t// \tloading.hide();\r\n\t\t\t\t// \tweui.toast('提交成功', 3000);\r\n\t\t\t\t// \twindow.location.replace('4.html');\r\n\t\t\t\t// }, 1500);\r\n\r\n\t\t\t\tif (get_area_number() < 1) {\r\n\t\t\t\t\tweui.form.showErrorTips({ ele: $(\"#areas\"), msg: 'empty' });\r\n\t\t\t\t}\r\n\t\t\t\telse if (get_professional_number() < 1) {\r\n\t\t\t\t\tweui.form.showErrorTips({ ele: $(\"#professionals\"), msg: 'empty' });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// return true; // 当return true时，不会显示错误\r\n\t\t});\r\n\r\n\r\n\t});\r\n\r\n\tweui.form.checkIfBlur('#fillout1-form');\r\n\r\n\thttpGetInfo('2002', $('#sch-kind'));\r\n\thttpGetInfo('2001', $('#batch'));\r\n})\r\n\r\nfunction httpGetRegionInfo() {\r\n\r\n\thttpGet('/region',\r\n\t\tnull,\r\n\t\tfunction (response) {\r\n\t\t\t//JSON.stringify\r\n\t\t\tif (response['body']) {\r\n\t\t\t\tregions = (response['body']);\r\n\t\t\t}\r\n\t\t},\r\n\t\tfunction (xhr, type) {\r\n\r\n\t\t});\r\n}\r\n\r\nfunction item_click(item_class, func) {\r\n\t$('.' + item_class).each(function (index) {\r\n\t\t$(this).on('click', function (e) {\r\n\t\t\tif ($(this).hasClass('area-btn')) {\r\n\t\t\t\tconsole.log('area btn!!!!!')\r\n\t\t\t\tvar pid = $(this).attr('pid');\r\n\t\t\t\tvar pname = $(this).attr('pname');\r\n\t\t\t\tvar cid = $(this).attr('cid');\r\n\t\t\t\tvar cname = $(this).attr('cname');\r\n\t\t\t\treturningAreaByDeleteItem(pid, pname, cid, cname);\r\n\t\t\t}\r\n\t\t\telse if ($(this).hasClass('professional-btn')) {\r\n\t\t\t\tconsole.log('professional btn!!!!!')\r\n\t\t\t\treturningProfessionalByDeleteItem($(this).attr('cid'), $(this).attr('cname'));\r\n\t\t\t}\r\n\t\t\t$(this).closest('div').remove();\r\n\t\t\tfunc();\r\n\t\t});\r\n\t});\r\n}\r\n\r\n\r\nfunction area_number() {\r\n\t$('#area_number').text($('.select-area-item').size() - 2);\r\n}\r\n\r\n\r\nfunction professional_number() {\r\n\r\n\t$('#professional_number').text($('.select-professional-item').size() - 2);\r\n}\r\n\r\nfunction get_area_number() {\r\n\treturn $('.select-area-item').size() - 2;\r\n}\r\n\r\nfunction get_professional_number() {\r\n\treturn $('.select-professional-item').size() - 2;\r\n}\r\n\r\nfunction item_append(type, template_id, item_click_class, item_class, maps, func) {\r\n\tvar item = $('#' + template_id).html();\r\n\r\n\tmaps.forEach(function (value, key, map) {\r\n\t\titem = item.replace(new RegExp(key, \"igm\"), value);\r\n\t});\r\n\t$('.' + item_class).last().after(item);\r\n\titem_click(maps.get('#class'), func);\r\n\tif (type == 'professional') {\r\n\t\t$('.' + maps.get('#class')).attr({ cid: maps.get('#id'), cname: maps.get('#name') });\r\n\t}\r\n\telse if (type == 'area') {\r\n\t\tvar pid = maps.get('#pid');\r\n\t\tvar cid = maps.get('#cid');\r\n\t\tvar cname = maps.get('#cname');\r\n\t\tvar pname = maps.get('#pname');\r\n\t\t$('.' + maps.get('#class')).attr({ pid: pid, cid: cid, cname: cname, pname: pname });\r\n\t\tareaRemoveItem(pid, pname, cid, cname);\r\n\t}\r\n\tfunc();\r\n}\r\n\r\nfunction area_list_click(pid, pname, cid, cname) {\r\n\tvar m = new Map();\r\n\tm.set('#name', pname + ' ' + cname);\r\n\tm.set('#pname', pname);\r\n\tm.set('#cname', cname);\r\n\tm.set('#class', new Date().getTime());\r\n\tm.set('#pid', pid);\r\n\tm.set('#cid', cid);\r\n\titem_append('area', 'area-item-template', 'area-btn', 'select-area-item', m, area_number);\r\n}\r\n\r\nfunction professional_list_click(id, name) {\r\n\tvar m = new Map();\r\n\tm.set('#name', name);\r\n\tm.set('#class', new Date().getTime());\r\n\tm.set('#id', id);\r\n\titem_append('professional', 'professional-item-template', 'professional-btn', 'select-professional-item', m, professional_number);\r\n}\r\n\r\nfunction areaRemoveItem(pid, pname, cid, cname) {\r\n\tfor (let index = 0; index < regions.length; index++) {\r\n\t\tconst region = regions[index];\r\n\t\tif (region['value'] == pid) {\r\n\t\t\t// alert('found' + region['label']);\r\n\t\t\tvar citys = region['children'];\r\n\t\t\tvar cidx = getCityIndex(citys, cid);\r\n\t\t\tif (cidx > -1) {\r\n\t\t\t\tcitys.splice(cidx, 1);\r\n\t\t\t}\r\n\t\t\tif (citys.length < 1) {\r\n\t\t\t\tregions.splice(index, 1)\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nfunction getCityIndex(citys, cid) {\r\n\tfor (let idx = 0; idx < citys.length; idx++) {\r\n\t\tconst city = citys[idx];\r\n\t\tif (city['value'] == cid) {\r\n\t\t\treturn idx;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\nfunction httpGetInfo(typeId, select) {\r\n\thttpGet('/common',\r\n\t\t{ typeId: typeId },\r\n\t\tfunction (response) {\r\n\t\t\t//JSON.stringify\r\n\t\t\tif (response['body'] && response['body']['typeVals']) {\r\n\t\t\t\t(response['body']['typeVals']).forEach(function (value, index, array) {\r\n\t\t\t\t\t//alert(JSON.stringify(value) + \",\" + JSON.stringify(index) + \",\" + JSON.stringify(array));\r\n\t\t\t\t\t$(\"<option />\", { text: value.valVal, value: value.valId }).appendTo(select);\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tfunction (xhr, type) {\r\n\r\n\t\t});\r\n}\r\n\r\n\r\nfunction getProfessionalIndex(val) {\r\n\tfor (var i = 0; i < professionals.length; i++) {\r\n\t\tif (professionals[i]['label'] == val) return i;\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\nfunction getAreaIndex(pid, pname) {\r\n\tfor (let index = 0; index < regions.length; index++) {\r\n\t\tconst region = regions[index];\r\n\t\tif (region['value'] == pid) {\r\n\t\t\treturn index;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\nfunction professionalOnClick(id, label) {\r\n\tprofessional_list_click(id, label);\r\n\r\n\tvar idx = getProfessionalIndex(label);\r\n\tif (idx > -1) professionals.splice(idx, 1);\r\n}\r\n\r\nfunction returningAreaByDeleteItem(pid, pname, cid, cname) {\r\n\tvar index = getAreaIndex(pid, pname);\r\n\tif (index > -1) {\r\n\t\tvar citys = regions[index]['children'];\r\n\t\tcitys.push({\r\n\t\t\tlabel: cname, value: cid\r\n\t\t});\r\n\t}\r\n\telse {\r\n\t\tregions.push({\r\n\t\t\tlabel: pname,\r\n\t\t\tvalue: pid,\r\n\t\t\tchildren: [{ label: cname, value: cid }]\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction returningProfessionalByDeleteItem(id, label) {\r\n\tprofessionals.push({\r\n\t\tlabel: label,\r\n\t\tonClick: function () { professionalOnClick(id, label) }\r\n\t});\r\n}\r\n\r\nfunction httpGetProfessionalInfo() {\r\n\thttpGet('/common',\r\n\t\t{ typeId: '2003' },\r\n\t\tfunction (response) {\r\n\t\t\t//JSON.stringify\r\n\t\t\t//return_code: \"SUCCESS\"\r\n\t\t\tif (response['body'] && response['body']['typeVals']) {\r\n\r\n\t\t\t\t(response['body']['typeVals']).forEach(function (value, index, array) {\r\n\r\n\t\t\t\t\t//$(\"<option />\", { text: value.valVal, value: value.valId }).appendTo(select);\r\n\t\t\t\t\tprofessionals.push({\r\n\t\t\t\t\t\tlabel: value.valVal,\r\n\t\t\t\t\t\tonClick: function () { professionalOnClick(value.valId, value.valVal) }\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tfunction (xhr, type) {\r\n\r\n\t\t});\r\n}\r\n\r\n\r\nvar interval = self.setInterval(function () {\r\n\thttpGet('/refresh/jwt',\r\n\t\tnull,\r\n\t\tfunction (response) {\r\n\r\n\t\t},\r\n\t\tfunction (xhr, type) {\r\n\r\n\t\t});\r\n}, 10000);\r\n\r\n"],"sourceRoot":""}