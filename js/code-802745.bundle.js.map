{"version":3,"sources":["webpack:///./src/components/code-component/code.js"],"names":["qs","queryStr","location","search","hash","substr","indexOf","args","items","length","split","item","len","i","name","decodeURIComponent","value","code","Object","_common_js_http_js__WEBPACK_IMPORTED_MODULE_0__","a","response","sessionStorage","Authorization","url","substring","$","param","window","replace","xhr","errorType","error","status","responseText","pathStr","pathname","lastIndexOf","protocol","host"],"mappings":"sHA0BAA,EAtBA,WACA,IAAAC,EAAAC,SAAAC,OACAF,IAEAA,GADAA,EAAAC,SAAAE,MACAC,OAAAJ,EAAAK,QAAA,OAQA,IANA,IAAAN,EAAAC,EAAAI,OAAA,GACAE,KACAC,EAAAR,EAAAS,OAAAT,EAAAU,MAAA,QACAC,EAAA,KACAC,EAAAJ,EAAAC,OAEAI,EAAA,EAAgBA,EAAAD,EAASC,IAAA,CACzBF,EAAAH,EAAAK,GAAAH,MAAA,KACA,IAAAI,EAAAC,mBAAAJ,EAAA,IACAK,EAAAD,mBAAAJ,EAAA,IACAG,IACAP,EAAAO,GAAAE,GAGA,OAAAT,EApBA,GAwBAP,EAAAiB,MACAC,OAAAC,EAAAC,EAAAF,CAAA,oCACGD,KAAAjB,EAAAiB,MACH,SAAAI,GACAC,eAAAC,cAAAF,SACArB,EAAAiB,KACA,IAAAO,EAAAtB,SAAAE,KAAAC,OAAA,GACAmB,EAAAlB,QAAA,UACAkB,IAAAC,UAAA,EAAAD,EAAAlB,QAAA,OAGAkB,IAAA,IAAAE,EAAAC,MAAA3B,GACA4B,OAAA1B,SAAA2B,QAAAL,IAEA,SAAAM,EAAAC,EAAAC,GACA,QAAAF,EAAAG,OAAA,CAEAX,eAAAC,cAAAO,EAAAI,aACA,IAAAC,EAAAjC,SAAAkC,SACAD,IAAAV,UAAA,EAAAU,EAAAE,YAAA,MACA,IAAAb,EAAAtB,SAAAoC,SAAA,KAAApC,SAAAqC,KAAAJ,EAAA,cACAP,OAAA1B,SAAA2B,QAAAL","file":"js/code-802745.bundle.js","sourcesContent":["import { httpGet, httpPost } from '../common/js/http.js';\r\n\r\n\r\n\r\nfunction getQueryString() {\r\n\tvar queryStr = location.search;\r\n\tif (!queryStr) {\r\n\t\tqueryStr = location.hash;\r\n\t\tqueryStr = queryStr.substr(queryStr.indexOf(\"?\"));\r\n\t}\r\n\tvar qs = queryStr.substr(1), //\r\n\t\targs = {}, //\r\n\t\titems = qs.length ? qs.split(\"&\") : [], //\r\n\t\titem = null,\r\n\t\tlen = items.length;\r\n\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\titem = items[i].split(\"=\");\r\n\t\tvar name = decodeURIComponent(item[0]),\r\n\t\t\tvalue = decodeURIComponent(item[1]);\r\n\t\tif (name) {\r\n\t\t\targs[name] = value;\r\n\t\t}\r\n\t}\r\n\treturn args;\r\n}\r\nvar qs = getQueryString();\r\n\r\nif (qs['code']) {\r\n\thttpGet('/wechat/portal/oauth/accesstoken',\r\n\t\t{ code: qs['code'] },\r\n\t\tfunction (response) {\r\n\t\t\tsessionStorage.Authorization = response;\r\n\t\t\tdelete qs['code'];\r\n\t\t\tvar url = location.hash.substr(1)\r\n\t\t\tif (url.indexOf('?') >= 0) {\r\n\t\t\t\turl = url.substring(0, url.indexOf('?'));\r\n\t\t\t}\r\n\r\n\t\t\turl = url + \"?\" + $.param(qs);\r\n\t\t\twindow.location.replace(url);\r\n\t\t},\r\n\t\tfunction (xhr, errorType, error) {\r\n\t\t\tif (xhr.status == 401) {\r\n\t\t\t\t//alert(\"status:\" + xhr.status + \", responseText:\" + xhr.responseText);\r\n\t\t\t\tsessionStorage.Authorization = xhr.responseText;\r\n\t\t\t\tvar pathStr = location.pathname;\r\n\t\t\t\tpathStr = pathStr.substring(0, pathStr.lastIndexOf(\"/\"));\r\n\t\t\t\tvar url = location.protocol+\"//\"+location.host+pathStr+\"/index.html\";\r\n\t\t\t\twindow.location.replace(url);\r\n\t\t\t}\r\n\t\t});\r\n}"],"sourceRoot":""}