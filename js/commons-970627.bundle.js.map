{"version":3,"sources":["webpack:///./src/components/common/js/http.js","webpack:///./src/components/common/js/tabbar.js","webpack:///./src/components/common/js/oauth.js","webpack:///./src/components/common/js/audio.js","webpack:///./src/components/common/js/config.js","webpack:///./src/components/common/images/laba.png","webpack:///./src/components/common/images/laba.gif"],"names":["httpClient","method","url","data","successfun","errorfun","isasync","timeout","_config_js__WEBPACK_IMPORTED_MODULE_0__","a","auth","sessionStorage","Authorization","httpUrl","c","$","ajax","type","context","async","headers","Content-Type","Origin","location","protocol","host","Access-Control-Request-Method","Access-Control-Request-Headers","success","response","status","xhr","error","errorType","httpGet","timestamp","Date","getTime","httpPost","indexOf","getUrl","htmlfile","pathStr","pathname","substring","lastIndexOf","getQueryString","queryStr","search","hash","substr","qs","args","items","length","split","item","len","i","name","decodeURIComponent","value","getClientHeight","document","body","clientHeight","documentElement","attr","height","fillCount","FillCount","text","on","e","window","replace","call","this","t","n","o","history","pushState","onpopstate","_config__WEBPACK_IMPORTED_MODULE_0__","b","TEST_TOKEN","doReady","navigator","userAgent","toLowerCase","match","Object","_http_js__WEBPACK_IMPORTED_MODULE_1__","RegExp","removeAttr","self","setInterval","LocationHref","href","getUrlNumber","GetOauthUrlNumber","parseInt","stop","execCommand","reload","console","log","interval_id","audioControl","audio","img","imgplay","imgpaused","paused","src","play","clearInterval","pause","__webpack_require__","d","__webpack_exports__","DEFAULT_TIMEOUT","IS_TEST","SERVICE_URL","module","exports","p"],"mappings":"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","file":"js/commons-970627.bundle.js","sourcesContent":["import { SERVICE_URL, DEFAULT_TIMEOUT } from './config.js';\r\n\r\n\r\n\r\nfunction httpClient(method, url, data, successfun, errorfun, isasync, timeout) {\r\n\tif (!url) { return; }\r\n\tif (!successfun) { successfun = function () { } }\r\n\tif (!errorfun) { errorfun = function () { } }\r\n\tif (!timeout) { timeout = DEFAULT_TIMEOUT; }\r\n\tif (isasync == null) { isasync = true; }\r\n\tvar auth = sessionStorage.Authorization;\r\n\tvar httpUrl = SERVICE_URL + url;\r\n\t//alert('async:' + isasync + \",\" + url);\r\n\t$.ajax({\r\n\t\ttype: method,\r\n\t\turl: httpUrl,\r\n\t\tdata: data,\r\n\t\ttimeout: timeout,\r\n\t\tcontext: $('body'),\r\n\t\tasync: isasync,\r\n\t\theaders: { 'Content-Type': 'application/json', 'Origin': location.protocol + \"//\" + location.host, 'Access-Control-Request-Method': method, 'Access-Control-Request-Headers': 'origin, content-type, accept, authorization, Pragma, Cache-control, Expires', 'Authorization': auth },\r\n\t\tsuccess: function (response, status, xhr) {\r\n\t\t\tsuccessfun(response, status, xhr);\r\n\t\t},\r\n\t\terror: function (xhr, errorType, error) {\r\n\t\t\t// if (xhr.status == 401) {\r\n\t\t\t// \t//alert(\"status:\" + xhr.status + \", responseText:\" + xhr.responseText);\r\n\t\t\t// \tsessionStorage.Authorization = null;\r\n\t\t\t// \twindow.location.reload();\r\n\t\t\t// }\r\n\t\t\terrorfun(xhr, errorType, error);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nexport function httpGet(url, data, successfun, errorfun, isasync, timeout) {\r\n\tif (data) {\r\n\t\tdata['timestamp'] = new Date().getTime()\r\n\t}\r\n\telse {\r\n\t\tdata = { timestamp: new Date().getTime() }\r\n\t}\r\n\thttpClient('GET', url, data, successfun, errorfun, isasync, timeout);\r\n}\r\n\r\nexport function httpPost(url, data, successfun, errorfun, isasync, timeout) {\r\n\tif (url.indexOf('?') < 0) {\r\n\t\t//not found ?\r\n\t\turl += '?timestamp=' + new Date().getTime();\r\n\t}\r\n\telse {\r\n\t\turl += '&timestamp=' + new Date().getTime();\r\n\t}\r\n\thttpClient('POST', url, data, successfun, errorfun, isasync, timeout);\r\n}\r\n\r\nexport function httpPut(url, data, successfun, errorfun, isasync, timeout) {\r\n\thttpClient('PUT', url, data, successfun, errorfun, isasync, timeout);\r\n}\r\n\r\nexport function httpDelete(url, data, successfun, errorfun, isasync, timeout) {\r\n\thttpClient('DELETE', url, data, successfun, errorfun, isasync, timeout);\r\n}\r\n\r\nexport function getUrl(htmlfile) {\r\n\tvar pathStr = location.pathname;\r\n\tpathStr = pathStr.substring(0, pathStr.lastIndexOf(\"/\"));\r\n\tvar url = location.protocol + \"//\" + location.host + pathStr + htmlfile;\r\n\treturn url;\r\n}\r\n\r\nexport function getQueryString() {\r\n\tvar queryStr = location.search;\r\n\tif (!queryStr) {\r\n\t\tqueryStr = location.hash;\r\n\t\tqueryStr = queryStr.substr(queryStr.indexOf(\"?\"));\r\n\t}\r\n\tvar qs = queryStr.substr(1), //\r\n\t\targs = {}, //\r\n\t\titems = qs.length ? qs.split(\"&\") : [], //\r\n\t\titem = null,\r\n\t\tlen = items.length;\r\n\r\n\tfor (var i = 0; i < len; i++) {\r\n\t\titem = items[i].split(\"=\");\r\n\t\tvar name = decodeURIComponent(item[0]),\r\n\t\t\tvalue = decodeURIComponent(item[1]);\r\n\t\tif (name) {\r\n\t\t\targs[name] = value;\r\n\t\t}\r\n\t}\r\n\treturn args;\r\n}","\r\nfunction getClientHeight() {\r\n    var clientHeight = 0;\r\n    if (document.body.clientHeight && document.documentElement.clientHeight) {\r\n        var clientHeight = (document.body.clientHeight < document.documentElement.clientHeight) ? document.body.clientHeight : document.documentElement.clientHeight;\r\n    }\r\n    else {\r\n        var clientHeight = (document.body.clientHeight > document.documentElement.clientHeight) ? document.body.clientHeight : document.documentElement.clientHeight;\r\n    }\r\n    return clientHeight;\r\n}\r\n\r\n$(function () {\r\n    $('.container').attr(\"style\", \"height: \" + (getClientHeight() - 66) + \"px\");\r\n    $('.my-weui-tab').attr(\"style\",\"height: \"+(getClientHeight()-186)+\"px\");\r\n    $('#my-layer-1').height(getClientHeight()-70);\r\n\r\n    var fillCount = sessionStorage.FillCount;\r\n    if (fillCount == null) {\r\n        fillCount = 0;\r\n    }\r\n    $('#tabbar-fill-count').text(fillCount);\r\n\r\n    // tabbar\r\n    $('#tabbar-fill-out').on('click', function (e) {\r\n        //\r\n        window.location.replace('fillout1.html');\r\n    });\r\n\r\n    // observe all clicks inside #content:\r\n    $('#tabbar-online-pay').on('click', function (e) {\r\n        //\r\n        window.location.replace('pay.html');\r\n    });\r\n})","import { IS_TEST, TEST_TOKEN } from './config';\r\nimport { httpGet, httpPost, getUrl } from './http.js';\r\nhistory.pushState(null, null, null);\r\nwindow.onpopstate = function () {\r\n\thistory.pushState(null, null, null);\r\n};\r\nvar interval;\r\n\r\nfunction oauth() {\r\n\tvar auth = sessionStorage.Authorization;\r\n\tif (!auth) {\r\n\t\tvar url = getUrl(\"/code.html#\" + location.pathname + location.search);\r\n\t\thttpGet('/wechat/portal/oauth/url',\r\n\t\t\t{ url: url },\r\n\t\t\tfunction (response) {\r\n\t\t\t\twindow.location.replace(response);\r\n\t\t\t},\r\n\t\t\tfunction (xhr, type) {\r\n\t\t\t\tvar getUrlNumber = sessionStorage.GetOauthUrlNumber;\r\n\t\t\t\tif (getUrlNumber) {\r\n\t\t\t\t\tgetUrlNumber = parseInt(getUrlNumber) + 1;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tgetUrlNumber = 1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (getUrlNumber > 3) {\r\n\t\t\t\t\twindow.stop ? window.stop() : document.execCommand(\"Stop\");\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsessionStorage.GetOauthUrlNumber = getUrlNumber;\r\n\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t}\r\n\telse {\r\n\t\tvar url = location.pathname;\r\n\t\tif (url.search(/index.html/i) > -1) {\r\n\t\t\thttpGet('/user/exists',\r\n\t\t\t\tnull,\r\n\t\t\t\tfunction (response) {\r\n\t\t\t\t\t//JSON.stringify\r\n\t\t\t\t\tif (response['body']) {\r\n\t\t\t\t\t\tif (response.body) {\r\n\t\t\t\t\t\t\twindow.location.replace('fillout.html');\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\tfunction (xhr, type) {\r\n\t\t\t\t},\r\n\t\t\t\tfalse);\r\n\t\t}\r\n\t\telse if (url.search(/fillout.html/i) > -1) {\r\n\t\t\tvar fillCount = sessionStorage.FillCount;\r\n\t\t\t//无可用填报次数\r\n\t\t\tif (fillCount != null && fillCount < 1) {\r\n\t\t\t\turl = url.replace(new RegExp('fillout.html', \"igm\"), 'pay.html');\r\n\t\t\t\twindow.location.replace(url);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t// normal\r\n\t\t$('body').removeAttr('style');\r\n\t\tinterval = self.setInterval(function () {\r\n\t\t\thttpGet('/refresh/jwt',\r\n\t\t\t\tnull,\r\n\t\t\t\tfunction (response) {\r\n\t\t\t\t},\r\n\t\t\t\tfunction (xhr, type) {\r\n\t\t\t\t});\r\n\t\t}, 1000 * 60 * 15);\r\n\t\tsessionStorage.LocationHref = location.href\r\n\t\t$(function () {\r\n\t\t\twindow.doReady();\r\n\t\t});\r\n\t}\r\n\t//}\r\n}\r\n\r\n\r\nif (IS_TEST) {\r\n\tsessionStorage.Authorization = TEST_TOKEN;\r\n\t$(function () {\r\n\t\twindow.doReady();\r\n\t});\r\n}\r\nelse {\r\n\tvar ua = window.navigator.userAgent.toLowerCase();\r\n\tif (ua.match(/MicroMessenger/i) == 'micromessenger') {\r\n\t\t$('body').attr('style', 'display: none');\r\n\t\toauth();\r\n\t} else {\r\n\t\tconsole.log('Not Weixin!');\r\n\t\twindow.stop ? window.stop() : document.execCommand(\"Stop\");\r\n\t}\r\n}","function audioRepeat(audio){\r\n\taudio.currentTime = 0;// replay\r\n}\r\n\r\nvar interval_id;\r\nfunction checkAudioStop(audio, img, imgpaused){\r\n\tif(audio!==null){\r\n\t\tif(audio.paused){\r\n\t\t\timg.src=imgpaused;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default function audioControl(audio, img, imgplay, imgpaused){\r\n\tif(audio!==null){ \r\n\t\tif(audio.paused){\r\n\t\t\timg.src=imgplay;\r\n\t\t\taudio.play();// play\r\n\t\t\tif(interval_id != null){\r\n\t\t\t\twindow.clearInterval(interval_id);\r\n\t\t\t\tinterval_id = null;\r\n\t\t\t}\r\n\t\t\tinterval_id = window.setInterval(function() {checkAudioStop(audio,img,imgpaused)},10);\r\n\t\t}else{\r\n\t\t\timg.src=imgpaused;\r\n\t\t\taudio.pause();// pause\r\n\t\t}\r\n\t} \r\n}\r\n/*audio_html_str = '<audio src=\"#file\" preload id=\"music\" hidden></audio>';\r\nfunction audio_js(file){\r\n\taudio_str = audio_html_str.replace(new RegExp('#file',\"igm\"), file);\r\n\tdocument.write(audio_str);\r\n}*/","export const DEFAULT_TIMEOUT= 1000*30;\r\nexport const IS_TEST = false;\r\n// export const SERVICE_URL= \"http://47.93.252.67\";\r\nexport const SERVICE_URL= \"http://w79j28.tunnel.qydev.com\";\r\n\r\n// export const IS_TEST = true;\r\n// export const SERVICE_URL= \"http://47.93.252.67\";\r\n// export const TEST_TOKEN = \"eyJhbGciOiJIUzUxMiJ9.eyJqdGkiOiJvSU9xczBkNldTXzYtLTQxczhoYjlXMS1jaTZFIiwiaWF0IjozMTIzMTA3Njk5OTUwLCJzdWIiOiI5X1NMWW1UMnkxVE56M0lPalQzTkJpSkJMQVZSTV9LVDRHS2lFZFpwS0tPcnE0MER6NUZ5RkRHMnJaZkFwdF9GNUlkLXgtMWFmOGV5bGN5SXlJeVVXNGswbjJXRlpHS2NsQlFLc1M3YVRsdGhFIiwiaXNzIjoiZ2Fva2FvenkifQ.d5g6j4A5zwLvELkNTWJqbDfp_uP4wJ9HikvrTYq50DeUlhK96WB1B6JqDFFjeexGjt1ouOKoc2UvNtlxgSEIsQ\";","module.exports = __webpack_public_path__ + \"images/laba-a4be88ca.png\";","module.exports = __webpack_public_path__ + \"images/laba-da365adb.gif\";"],"sourceRoot":""}