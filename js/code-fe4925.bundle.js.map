{"version":3,"sources":["webpack:///./src/components/code-component/code.js"],"names":["qs","Object","_common_js_http_js__WEBPACK_IMPORTED_MODULE_0__","a","code","c","response","alert","JSON","stringify","token","sessionStorage","Authorization","url","location","hash","substr","indexOf","substring","search","replace","RegExp","$","param","window","xhr","errorType","error","status","responseText","parse","b"],"mappings":"uHAGAA,EAAAC,OAAAC,EAAAC,EAAAF,GAEAD,EAAAI,MACAH,OAAAC,EAAAG,EAAAJ,CAAA,oCACGG,KAAAJ,EAAAI,MACH,SAAAE,GACAC,MAAAC,KAAAC,UAAAH,IACAC,MAAA,SAAAD,EAAAI,OACAC,eAAAC,cAAAN,EAAAI,aACAV,EAAAI,KACA,IAAAS,EAAAC,SAAAC,KAAAC,OAAA,GACAH,EAAAI,QAAA,UACAJ,IAAAK,UAAA,EAAAL,EAAAI,QAAA,OAGAJ,EAAAM,OAAA,iBACAN,IAAAO,QAAA,IAAAC,OAAA,iCAGAR,IAAA,IAAAS,EAAAC,MAAAvB,GACAO,MAAAM,GACAW,OAAAV,SAAAM,QAAAP,IAEA,SAAAY,EAAAC,EAAAC,GACA,QAAAF,EAAAG,OAAA,CACArB,MAAA,UAAAkB,EAAAG,OAAA,kBAAAH,EAAAI,aAAA,WAAArB,KAAAsB,MAAAL,EAAAI,cAAAnB,OACAC,eAAAC,cAAAJ,KAAAsB,MAAAL,EAAAI,cAAAnB,MAEA,IAAAG,EAAAZ,OAAAC,EAAA6B,EAAA9B,CAAA,eACAuB,OAAAV,SAAAM,QAAAP","file":"js/code-fe4925.bundle.js","sourcesContent":["import { httpGet, httpPost, getUrl, getQueryString } from '../common/js/http.js';\r\n\r\n\r\nvar qs = getQueryString();\r\n\r\nif (qs['code']) {\r\n\thttpGet('/wechat/portal/oauth/accesstoken',\r\n\t\t{ code: qs['code'] },\r\n\t\tfunction (response) {\r\n\t\t\talert(JSON.stringify(response));\r\n\t\t\talert(\"token=\"+response.token);\r\n\t\t\tsessionStorage.Authorization = response.token;\r\n\t\t\tdelete qs['code'];\r\n\t\t\tvar url = location.hash.substr(1)\r\n\t\t\tif (url.indexOf('?') >= 0) {\r\n\t\t\t\turl = url.substring(0, url.indexOf('?'));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(url.search(/index.html/i)){\r\n\t\t\t\turl = url.replace(new RegExp('index.html',\"igm\"), 'pay.html');\r\n\t\t\t}\r\n\r\n\t\t\turl = url + \"?\" + $.param(qs);\r\n\t\t\talert(url);\r\n\t\t\twindow.location.replace(url);\r\n\t\t},\r\n\t\tfunction (xhr, errorType, error) {\r\n\t\t\tif (xhr.status == 401) {\r\n\t\t\t\talert(\"status:\" + xhr.status + \", responseText:\" + xhr.responseText + \", token:\" + JSON.parse(xhr.responseText).token);\r\n\t\t\t\tsessionStorage.Authorization = JSON.parse(xhr.responseText).token;\r\n\t\t\t\t\r\n\t\t\t\tvar url = getUrl(\"/index.html\");\r\n\t\t\t\twindow.location.replace(url);\r\n\t\t\t}\r\n\t\t});\r\n}"],"sourceRoot":""}