{"version":3,"sources":["webpack:///./src/components/fillprofessionallist-component/fillprofessionallist.js"],"names":["window","doReady","$","each","index","console","log","this","on","e","removeClass","attr","addClass","removeAttr","qs","Object","_common_js_http_js__WEBPACK_IMPORTED_MODULE_4__","a","fillId","schId","schedId","schName","text","c","response","body","sprintList","forEach","item","array","professionalListAppend","rationalList","endList","xhr","type","setTimeout","location","reload","loading","weui_js__WEBPACK_IMPORTED_MODULE_1___default","sprintProSelList","getSchoolProSelList","rationalProSelList","endProSelList","schoolProSelList","concat","d","JSON","stringify","hide","replace","errorType","error","status","template_id","item_class","response_item","sel_type","html","id","RegExp","proName","last","after","proId","selType","item_type","proSelList","prop","adjust","push"],"mappings":"kKAYAA,OAAAC,QAAA,WACAC,EAAA,sBAAAC,KAAA,SAAAC,GACAC,QAAAC,IAAA,YAAAF,EAAAG,MACAL,EAAAK,MAAAC,GAAA,iBAAAC,GAEAP,EAAA,sBAAAC,KAAA,SAAAC,GACAF,EAAAK,MAAAG,YAAA,qBACAR,EAAA,IAAAA,EAAAK,MAAAI,KAAA,OAAAA,KAAA,0BAEAT,EAAAK,MAAAK,SAAA,qBACAV,EAAA,IAAAA,EAAAK,MAAAI,KAAA,OAAAE,WAAA,aAKA,IAAAC,EAAAC,OAAAC,EAAAC,EAAAF,GAEAG,EAAAJ,EAAAI,OAEAC,EAAAL,EAAAK,MACAC,EAAAN,EAAAM,QACAC,EAAAP,EAAAO,QACAnB,EAAA,gBAAAoB,KAAAD,GA4BA,SAAAF,EAAAD,GACAH,OAAAC,EAAAO,EAAAR,CAAA,wBAEAI,QACAD,UAEA,SAAAM,GAGAA,EAAAC,OACAD,EAAAC,KAAAC,WAAAC,QAAA,SAAAC,EAAAxB,EAAAyB,GACAC,EAAA,qCAAAF,EAAA,MAEAJ,EAAAC,KAAAM,aAAAJ,QAAA,SAAAC,EAAAxB,EAAAyB,GACAC,EAAA,yCAAAF,EAAA,MAEAJ,EAAAC,KAAAO,QAAAL,QAAA,SAAAC,EAAAxB,EAAAyB,GACAC,EAAA,+BAAAF,EAAA,QAMA,SAAAK,EAAAC,GACAC,WAAA,WACAnC,OAAAoC,SAAAC,UACa,OA1Bb,CA1BAlB,EAAAD,GAEAhB,EAAA,kBAAAM,GAAA,iBAAAC,GAEA,IAAA6B,EAAAC,EAAAtB,EAAAqB,QAAA,UACAE,EAAAC,EAAA,mBACAC,EAAAD,EAAA,qBACAE,EAAAF,EAAA,gBAEAG,EAAAJ,EAAAK,OAAAH,GAAAG,OAAAF,GAEA5B,OAAAC,EAAA8B,EAAA/B,CAAA,sBAAAG,EAAA,IAAAE,EAAA,IAAAD,EACA4B,KAAAC,UAAAJ,GACA,SAAApB,GACAc,EAAAW,OACAjD,OAAAoC,SAAAc,QAAA,8BAAAhC,IAEA,SAAAe,EAAAkB,EAAAC,GACA,KAAAnB,EAAAoB,QACArD,OAAAoC,SAAAc,QAAA,iBAqCA,IAAA9C,EAAA,EAEA,SAAA0B,EAAAwB,EAAAC,EAAAC,EAAAC,GACA,IAAA7B,EAAA1B,EAAA,IAAAoD,GAAAI,OACAC,EAAAvD,IAEAwB,GADAA,IAAAsB,QAAA,IAAAU,OAAA,aAAAD,IACAT,QAAA,IAAAU,OAAA,eAAAJ,EAAAK,SACA3D,EAAA,IAAAqD,GAAAO,OAAAC,MAAAnC,GACA1B,EAAA,IAAAyD,GAAAhD,MAAsBqD,MAAAR,EAAAQ,MAAAH,QAAAL,EAAAK,QAAAI,QAAAR,IAStB,SAAAhB,EAAAyB,GACA,IAAAC,KAmBA,OAlBAjE,EAAA,IAAAgE,GAAAvC,QAAA,SAAAC,EAAAxB,EAAAyB,GACA,GAAA3B,EAAA0B,GAAAwC,KAAA,YACA,IAAAJ,EAAA9D,EAAA0B,GAAAjB,KAAA,SACAkD,EAAA3D,EAAA0B,GAAAjB,KAAA,WACAsD,EAAA/D,EAAA0B,GAAAjB,KAAA,WACAgD,EAAAzD,EAAA0B,GAAAjB,KAAA,MACA0D,EAAAnE,EAAA,KAAAyD,GAAAS,KAAA,mBACA,MAAAJ,GAAA,MAAAH,GACAM,EAAAG,MACAD,SACAL,QACAH,UACAI,eAMAE","file":"js/fillprofessionallist-554a72.bundle.js","sourcesContent":["\r\nimport 'weui';\r\nimport weui from 'weui.js';\r\nimport '../common/style/app.css';\r\n\r\n\r\nimport audioControl from '../common/js/audio.js';\r\nimport { httpPost, httpGet, getUrl, getQueryString } from '../common/js/http.js';\r\nimport '../common/js/oauth.js';\r\nimport '../common/js/tabbar.js';\r\n\r\n\r\nwindow.doReady = function () {\r\n    $('.weui-navbar__item').each(function (index) {\r\n        console.log('%d is: %o', index, this)\r\n        $(this).on('click', function (e) {\r\n            //\r\n            $('.weui-navbar__item').each(function (index) {\r\n                $(this).removeClass(\"weui-bar__item_on\")\r\n                $(\".\" + ($(this).attr('id'))).attr(\"style\", \"display:none\")//\r\n            })\r\n            $(this).addClass(\"weui-bar__item_on\")\r\n            $(\".\" + ($(this).attr('id'))).removeAttr(\"style\")\r\n        })\r\n    });\r\n\r\n\r\n    var qs = getQueryString();\r\n\r\n    var fillId = (qs['fillId']);\r\n    // var fillId = 'FR201805097';\r\n    var schId = qs['schId'];\r\n    var schedId = qs['schedId'];\r\n    var schName = qs['schName'];\r\n    $('#school-name').text(schName);\r\n\r\n    getSchoolProfessional(schId, fillId);\r\n\r\n    $('#formSubmitBtn').on('click', function (e) {\r\n        //  /fill/professional/{fillId}/{schedId}/{schId}\r\n        var loading = weui.loading('提交中...');\r\n        var sprintProSelList = getSchoolProSelList('sprint-checkbox');\r\n        var rationalProSelList = getSchoolProSelList('rational-checkbox');\r\n        var endProSelList = getSchoolProSelList('end-checkbox');\r\n\r\n        var schoolProSelList = sprintProSelList.concat(rationalProSelList).concat(endProSelList);\r\n        //alert(JSON.stringify(schoolProSelList));\r\n        httpPost('/fill/professional/' + fillId + '/' + schedId + '/' + schId,\r\n            JSON.stringify(schoolProSelList),\r\n            function (response) {\r\n                loading.hide();\r\n                window.location.replace('fillschoollist.html?fillId=' + fillId);\r\n            },\r\n            function (xhr, errorType, error) {\r\n                if (xhr.status == 401) {\r\n                    window.location.replace('pay.html');\r\n                }\r\n            });\r\n\r\n    });\r\n}\r\n\r\nfunction getSchoolProfessional(schId, fillId) {\r\n    httpGet('/school/professional',\r\n        {\r\n            schId: schId,\r\n            fillId: fillId\r\n        },\r\n        function (response) {\r\n            // weui.alert(JSON.stringify(response));\r\n\r\n            if (response['body']) {\r\n                (response['body']['sprintList']).forEach(function (item, index, array) {\r\n                    professionalListAppend('sprint-item-template', 'sprint-item', item, 10);\r\n                });\r\n                (response['body']['rationalList']).forEach(function (item, index, array) {\r\n                    professionalListAppend('rational-item-template', 'rational-item', item, 11);\r\n                });\r\n                (response['body']['endList']).forEach(function (item, index, array) {\r\n                    professionalListAppend('end-item-template', 'end-item', item, 12);\r\n                });\r\n\r\n            }\r\n\r\n        },\r\n        function (xhr, type) {\r\n            setTimeout(function () {\r\n                window.location.reload();\r\n            }, 5000);\r\n        });\r\n}\r\n\r\nvar index = 0;\r\n\r\nfunction professionalListAppend(template_id, item_class, response_item, sel_type) {\r\n    var item = $('#' + template_id).html();\r\n    var id = index++;\r\n    item = item.replace(new RegExp('#id', \"igm\"), id);\r\n    item = item.replace(new RegExp('#name', \"igm\"), response_item['proName']);\r\n    $('.' + item_class).last().after(item);\r\n    $('#' + id).attr({ proId: response_item['proId'], proName: response_item['proName'], selType: sel_type });\r\n\r\n}\r\n// {\r\n//     \"adjust\": \"string\",\r\n//     \"proId\": \"string\",\r\n//     \"proName\": \"string\",\r\n//     \"selType\": \"string\"\r\n// }\r\nfunction getSchoolProSelList(item_type) {\r\n    var proSelList = [];\r\n    $('.' + item_type).forEach(function (item, index, array) {\r\n        if ($(item).prop(\"checked\")) {\r\n            var proId = $(item).attr('proId');\r\n            var proName = $(item).attr('proName');\r\n            var selType = $(item).attr('selType');\r\n            var id = $(item).attr('id');\r\n            var adjust = $('#s' + id).prop(\"checked\") ? '1' :'0';\r\n            if (proId != null && proName != null) {\r\n                proSelList.push({\r\n                    \"adjust\": adjust,\r\n                    \"proId\": proId,\r\n                    \"proName\": proName,\r\n                    \"selType\": selType\r\n                });\r\n            }\r\n        }\r\n\r\n    });\r\n    return proSelList;\r\n}\r\n\r\n\r\n"],"sourceRoot":""}