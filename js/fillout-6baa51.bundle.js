(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{15:function(e,t,n){"use strict";n.r(t),function(e){n(3);var t,a,o=n(1),i=n.n(o),l=(n(4),n(10),n(9),n(7),n(0)),r=(n(6),n(5),[]);function c(t,n){e("."+t).each(function(t){e(this).on("click",function(t){e(this).hasClass("area-btn")?(console.log("area btn!!!!!"),function(e,t,n,a){var o=function(e,t){for(let t=0;t<r.length;t++){if(r[t].value==e)return t}return-1}(e);o>-1?r[o].children.push({label:a,value:n}):r.push({label:t,value:e,children:[{label:a,value:n}]})}(e(this).attr("pid"),e(this).attr("pname"),e(this).attr("cid"),e(this).attr("cname"))):e(this).hasClass("professional-btn")&&(console.log("professional btn!!!!!"),g(e(this).attr("cid"),e(this).attr("cname"))),e(this).closest("div").remove(),n()})})}function t(){e("#area_number").text(e(".select-area-item").size()-2)}function a(){e("#professional_number").text(e(".select-professional-item").size()-2)}function s(){return e(".select-area-item").size()-2}function f(){return e(".select-professional-item").size()-2}function u(t,n,a,o,i,l){var s=e("#"+n).html();if(i.forEach(function(e,t,n){s=s.replace(new RegExp(t,"igm"),e)}),e("."+o).last().after(s),c(i.get("#class"),l),"professional"==t)e("."+i.get("#class")).attr({cid:i.get("#id"),cname:i.get("#name")});else if("area"==t){var f=i.get("#pid"),u=i.get("#cid"),p=i.get("#cname"),d=i.get("#pname");e("."+i.get("#class")).attr({pid:f,cid:u,cname:p,pname:d}),function(e,t,n,a){for(let t=0;t<r.length;t++){const a=r[t];if(a.value==e){var o=a.children,i=m(o,n);return i>-1&&o.splice(i,1),void(o.length<1&&r.splice(t,1))}}}(f,0,u)}l()}function m(e,t){for(let n=0;n<e.length;n++)if(e[n].value==t)return n;return-1}function p(t,n){Object(l.c)("/common",{typeId:t},function(t){t.body&&t.body.typeVals&&t.body.typeVals.forEach(function(t,a,o){e("<option />",{text:t.valVal,value:t.valId}).appendTo(n)})},function(e,t){})}function d(t,n,o){!function(e,t){var n=new Map;n.set("#name",t),n.set("#class",(new Date).getTime()),n.set("#id",e),u("professional","professional-item-template",0,"select-professional-item",n,a)}(n,o),e(t).remove()}window.doReady=function(){c("area-btn",t),c("professional-btn",a),Object(l.c)("/region",null,function(e){e.body&&(r=e.body)},function(e,t){}),Object(l.c)("/common",{typeId:"2003"},function(e){e.body&&e.body.typeVals&&e.body.typeVals.forEach(function(e,t,n){g(e.valId,e.valVal)})},function(e,t){}),e("#my-layer-0").on("click",function(){e("#my-layer-0").toggle()}),e("#area-list").on("click",function(e){i.a.form.hideErrorTips(document.getElementById("areas")),s()>=6||i.a.picker(r,{className:"custom-classname",container:"body",defaultValue:[1,3],onChange:function(e){console.log(e)},onConfirm:function(e){var n,a,o,i,l;console.log(e),n=e[0].value,a=e[0].label,o=e[1].value,i=e[1].label,(l=new Map).set("#name",a+" "+i),l.set("#pname",a),l.set("#cname",i),l.set("#class",(new Date).getTime()),l.set("#pid",n),l.set("#cid",o),u("area","area-item-template",0,"select-area-item",l,t)},id:"doubleLinePicker"})}),e("#professional-list").on("click",function(t){i.a.form.hideErrorTips(document.getElementById("professionals")),f()>=6||e("#my-layer-0").toggle(!0)}),e("#formSubmitBtn").on("click",function(t){i.a.form.validate("#fillout1-form",function(t){if(!t)if(s()<1)i.a.form.showErrorTips({ele:document.getElementById("areas"),msg:"empty"});else if(f()<1)i.a.form.showErrorTips({ele:document.getElementById("professionals"),msg:"empty"});else{i.a.loading("提交中...");var n={batch:e("#batch").val(),mark:e("#mark").val(),proList:(c=[],e(".professional-btn").forEach(function(t,n,a){var o=e(t).attr("cid"),i=e(t).attr("cname");null!=o&&null!=i&&c.push({proId:o,proName:i})}),c),pros:(r=[],e(".professional-btn").forEach(function(t,n,a){var o=e(t).attr("cid"),i=e(t).attr("cname");null!=o&&null!=i&&r.push(o)}),r.join()),provs:(o=[],e(".area-btn").forEach(function(t,n,a){var i=e(t).attr("pid"),l=(e(t).attr("pname"),e(t).attr("cid"));e(t).attr("cname"),null!=i&&null!=l&&o.push(l)}),o.join()),regionList:(a=[],e(".area-btn").forEach(function(t,n,o){var i=e(t).attr("pid"),l=e(t).attr("pname"),r=e(t).attr("cid"),c=e(t).attr("cname");null!=i&&null!=r&&a.push({cityId:r,cityName:c,provId:i,provName:l})}),a),schKind:e("#sch-kind").val()};Object(l.d)("/fill/record",JSON.stringify(n),function(e){sessionStorage.FillCount=e.body.fillCount;var t=e.body.fillId;window.location.replace("fillschool.html?fillId="+t)},function(e,t,n){401==e.status&&window.location.replace("pay.html")})}var a,o,r,c})}),i.a.form.checkIfBlur("#fillout1-form"),p("2002",e("#sch-kind")),p("2001",e("#batch"))};var h=0;function g(t,n){var a=e("#professional-list-template").html(),o=h++;a=(a=a.replace(new RegExp("#id","igm"),o)).replace(new RegExp("#name","igm"),n),e("#my-layer-1").append(a),e("#"+o).on("click",function(e){d(this,t,n)})}}.call(this,n(2))}},[[15,0,2,1]]]);
//# sourceMappingURL=fillout-6baa51.bundle.js.map