{"version":3,"sources":["webpack:///./src/components/code-component/code.js"],"names":["history","pushState","window","onpopstate","qs","Object","_common_js_http_js__WEBPACK_IMPORTED_MODULE_0__","a","code","c","response","sessionStorage","Authorization","token","FillCount","fillCount","url","location","hash","substr","indexOf","substring","timestamp","Date","getTime","$","param","replace","xhr","errorType","error","status","JSON","parse","responseText","b"],"mappings":"uHAEAA,QAAAC,UAAA,gBACAC,OAAAC,WAAA,WACAH,QAAAC,UAAA,iBAEA,IAAAG,EAAAC,OAAAC,EAAAC,EAAAF,GAEAD,EAAAI,MACAH,OAAAC,EAAAG,EAAAJ,CAAA,oCACGG,KAAAJ,EAAAI,MACH,SAAAE,GACAC,eAAAC,cAAAF,EAAAG,MACAF,eAAAG,UAAAJ,EAAAK,iBACAX,EAAAI,KACA,IAAAQ,EAAAC,SAAAC,KAAAC,OAAA,GACAH,EAAAI,QAAA,UACAJ,IAAAK,UAAA,EAAAL,EAAAI,QAAA,OAEAhB,EAAAkB,WAAA,IAAAC,MAAAC,UACAR,IAAA,IAAAS,EAAAC,MAAAtB,GACAF,OAAAe,SAAAU,QAAAX,IAEA,SAAAY,EAAAC,EAAAC,GACA,QAAAF,EAAAG,OAAA,CAEApB,eAAAC,cAAAoB,KAAAC,MAAAL,EAAAM,cAAArB,MAEA,IAAAG,EAAAX,OAAAC,EAAA6B,EAAA9B,CAAA,eACAH,OAAAe,SAAAU,QAAAX","file":"js/code-16075a.bundle.js","sourcesContent":["import { httpGet, httpPost, getUrl, getQueryString } from '../common/js/http.js';\r\n\r\nhistory.pushState(null, null, null);\r\nwindow.onpopstate = function(){\r\n\thistory.pushState(null, null, null);\r\n};\r\nvar qs = getQueryString();\r\n\r\nif (qs['code']) {\r\n\thttpGet('/wechat/portal/oauth/accesstoken',\r\n\t\t{ code: qs['code'] },\r\n\t\tfunction (response) {\r\n\t\t\tsessionStorage.Authorization = response.token;\r\n\t\t\tsessionStorage.FillCount = response.fillCount;\r\n\t\t\tdelete qs['code'];\r\n\t\t\tvar url = location.hash.substr(1)\r\n\t\t\tif (url.indexOf('?') >= 0) {\r\n\t\t\t\turl = url.substring(0, url.indexOf('?'));\r\n\t\t\t}\r\n\t\t\tqs['timestamp'] = new Date().getTime();\r\n\t\t\turl = url + \"?\" + $.param(qs);\r\n\t\t\twindow.location.replace(url);\r\n\t\t},\r\n\t\tfunction (xhr, errorType, error) {\r\n\t\t\tif (xhr.status == 401) {\r\n\t\t\t\t//alert(\"status:\" + xhr.status + \", responseText:\" + xhr.responseText + \", token:\" + JSON.parse(xhr.responseText).token);\r\n\t\t\t\tsessionStorage.Authorization = JSON.parse(xhr.responseText).token;\r\n\t\t\t\t\r\n\t\t\t\tvar url = getUrl(\"/index.html\");\r\n\t\t\t\twindow.location.replace(url);\r\n\t\t\t}\r\n\t\t});\r\n}"],"sourceRoot":""}