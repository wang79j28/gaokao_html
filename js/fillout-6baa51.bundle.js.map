{"version":3,"sources":["webpack:///./src/components/fillout-component/fillout.js"],"names":["area_number","professional_number","regions","item_click","item_class","func","$","each","index","this","on","e","hasClass","console","log","pid","pname","cid","cname","length","value","children","push","label","attr","professionalListAppend","closest","remove","text","size","get_area_number","get_professional_number","item_append","type","template_id","item_click_class","maps","item","html","forEach","key","map","replace","RegExp","last","after","get","region","citys","cidx","getCityIndex","splice","idx","httpGetInfo","typeId","select","Object","_common_js_http_js__WEBPACK_IMPORTED_MODULE_6__","c","response","body","typeVals","array","valVal","valId","appendTo","xhr","professionalOnClick","thisItem","id","name","m","Map","set","Date","getTime","window","doReady","toggle","weui_js__WEBPACK_IMPORTED_MODULE_1___default","a","form","hideErrorTips","document","getElementById","picker","className","container","defaultValue","onChange","result","onConfirm","validate","error","showErrorTips","ele","msg","loading","fillObject","batch","val","mark","proList","proId","proName","pros","proIdList","join","provs","regionIdList","regionList","cityId","cityName","provId","provName","schKind","d","JSON","stringify","sessionStorage","FillCount","fillCount","fillId","location","errorType","status","checkIfBlur","tpl","append"],"mappings":"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","file":"js/fillout-6baa51.bundle.js","sourcesContent":["\r\nimport 'weui';\r\nimport weui from 'weui.js';\r\nimport '../common/style/app.css';\r\n\r\nimport LabaGif from '../common/images/laba.gif';\r\nimport LabaPng from '../common/images/laba.png';\r\nimport audioControl from '../common/js/audio.js';\r\nimport { httpPost, httpGet, getUrl } from '../common/js/http.js';\r\nimport '../common/js/oauth.js';\r\nimport '../common/js/tabbar.js';\r\n\r\n// sessionStorage.Authorization = 'eyJhbGciOiJIUzUxMiJ9.eyJqdGkiOiJvSU9xczBkNldTXzYtLTQxczhoYjlXMS1jaTZFIiwiaWF0IjoyMDA5MjE0MzQzOTA4LCJzdWIiOiI5X21ITjhHSnhBUk5NR1c5YW52T244Z2xmYzRDenVZdWE5Nk1xWmVTSFA0aWJlcEpYc3lWRWpRLVVPOFNzc2pUODBQZXYwVmdFREl0YTVMMXBqWHVEWTBmZ3VMZHFfYm1HdzFkbi1BZnFkNTJNIiwiaXNzIjoiZ2Fva2FvenkifQ.d1Ov_MuTR-enTPlrZm6XU3A7Mzue81GwcEBT5lyfRiXElAtvZ3oIkxEg112hpy97qmPsCrpM9QM0m_Ra05Qj3Q';\r\n\r\nvar regions = [];\r\nvar professionals = [];\r\nvar area_number;\r\nvar professional_number;\r\n\r\n\r\nwindow.doReady = function () {\r\n\t// $(function () {\r\n\t// if (process.env.NODE_ENV !== 'production') {\r\n\t// console.log('Looks like we are in development mode!');\r\n\t// alert('development Ready to Zepto!') \r\n\t// }\r\n\t// else{\r\n\t// alert('production Ready to Zepto!') \r\n\t// }\r\n\titem_click('area-btn', area_number);\r\n\titem_click('professional-btn', professional_number);\r\n\thttpGetRegionInfo();\r\n\thttpGetProfessionalInfo();\r\n\r\n\t$('#my-layer-0').on('click', function () {\r\n\t\t$('#my-layer-0').toggle();\r\n\t});\r\n\r\n\t$('#area-list').on('click', function (e) {\r\n\t\tweui.form.hideErrorTips(document.getElementById(\"areas\"));\r\n\t\tif (get_area_number() >= 6) return;\r\n\r\n\t\tweui.picker(regions, {\r\n\t\t\tclassName: 'custom-classname',\r\n\t\t\tcontainer: 'body',\r\n\t\t\tdefaultValue: [1, 3],\r\n\t\t\tonChange: function (result) {\r\n\t\t\t\tconsole.log(result)\r\n\t\t\t},\r\n\t\t\tonConfirm: function (result) {\r\n\t\t\t\tconsole.log(result)\r\n\t\t\t\t// $('#school-name').text(result[1].label)\r\n\t\t\t\tarea_list_click(result[0].value, result[0].label, result[1].value, result[1].label);\r\n\t\t\t},\r\n\t\t\tid: 'doubleLinePicker'\r\n\t\t});\r\n\t});\r\n\r\n\t$('#professional-list').on('click', function (e) {\r\n\t\tweui.form.hideErrorTips(document.getElementById(\"professionals\"));\r\n\t\tif (get_professional_number() >= 6) return;\r\n\t\t// weui.actionSheet(professionals, [\r\n\t\t// \t{\r\n\t\t// \t\tlabel: '取消',\r\n\t\t// \t\tonClick: function () {\r\n\t\t// \t\t\tconsole.log('取消');\r\n\t\t// \t\t}\r\n\t\t// \t}\r\n\t\t// ], {\r\n\t\t// \t\tclassName: 'custom-classname',\r\n\t\t// \t\tonClose: function () {\r\n\t\t// \t\t\tconsole.log('关闭');\r\n\t\t// \t\t}\r\n\t\t// \t});\r\n\t\t$('#my-layer-0').toggle(true);\r\n\t});\r\n\r\n\t// observe all clicks inside #content:\r\n\t$('#formSubmitBtn').on('click', function (e) {\r\n\t\t//\r\n\r\n\t\t//weui.form.showErrorTips({ele: document.getElementById(\"zhuanyie\"),msg: 'empty'});\r\n\t\t//return;\r\n\t\tweui.form.validate('#fillout1-form', function (error) {\r\n\t\t\tif (!error) {\r\n\t\t\t\tif (get_area_number() < 1) {\r\n\t\t\t\t\tweui.form.showErrorTips({ ele: document.getElementById(\"areas\"), msg: 'empty' });\r\n\t\t\t\t}\r\n\t\t\t\telse if (get_professional_number() < 1) {\r\n\t\t\t\t\tweui.form.showErrorTips({ ele: document.getElementById(\"professionals\"), msg: 'empty' });\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar loading = weui.loading('提交中...');\r\n\r\n\t\t\t\t\tvar fillObject = {\r\n\t\t\t\t\t\t\"batch\": $('#batch').val(),\r\n\t\t\t\t\t\t\"mark\": $('#mark').val(),\r\n\t\t\t\t\t\t\"proList\": getSelectProInfo(),\r\n\t\t\t\t\t\t\"pros\": getSelectProIds(), //意向专业\r\n\t\t\t\t\t\t\"provs\": getSelectAreaIds(), //意向省\r\n\t\t\t\t\t\t\"regionList\": getSelectAreaInfo(),\r\n\t\t\t\t\t\t\"schKind\": $('#sch-kind').val()\r\n\r\n\t\t\t\t\t};\r\n\t\t\t\t\t//alert(JSON.stringify(fillObject));\r\n\r\n\t\t\t\t\thttpPost('/fill/record',\r\n\t\t\t\t\t\tJSON.stringify(fillObject),\r\n\t\t\t\t\t\tfunction (response) {\r\n\t\t\t\t\t\t\tsessionStorage.FillCount = response['body'].fillCount;\r\n\t\t\t\t\t\t\tvar fillId = response['body'].fillId;\r\n\t\t\t\t\t\t\twindow.location.replace('fillschool.html?fillId=' + fillId);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfunction (xhr, errorType, error) {\r\n\t\t\t\t\t\t\tif (xhr.status == 401) {\r\n\t\t\t\t\t\t\t\twindow.location.replace('pay.html');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// return true; // 当return true时，不会显示错误\r\n\t\t});\r\n\r\n\r\n\t});\r\n\r\n\tweui.form.checkIfBlur('#fillout1-form');\r\n\r\n\thttpGetInfo('2002', $('#sch-kind'));\r\n\thttpGetInfo('2001', $('#batch'));\r\n\t// })\r\n};\r\n\r\nfunction getSelectProInfo() {\r\n\tvar proList = [];\r\n\t$('.professional-btn').forEach(function (item, index, array) {\r\n\t\tvar cid = $(item).attr('cid');\r\n\t\tvar cname = $(item).attr('cname');\r\n\t\tif (cid != null && cname != null) {\r\n\t\t\tproList.push({\r\n\t\t\t\t\"proId\": cid,\r\n\t\t\t\t\"proName\": cname\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\treturn proList;\r\n}\r\n\r\nfunction getSelectProIds() {\r\n\tvar proIdList = [];\r\n\t$('.professional-btn').forEach(function (item, index, array) {\r\n\t\tvar cid = $(item).attr('cid');\r\n\t\tvar cname = $(item).attr('cname');\r\n\t\tif (cid != null && cname != null) {\r\n\t\t\tproIdList.push(cid);\r\n\t\t}\r\n\t});\r\n\treturn proIdList.join();\r\n}\r\n\r\nfunction getSelectAreaInfo() {\r\n\tvar regionList = [];\r\n\t$('.area-btn').forEach(function (item, index, array) {\r\n\t\tvar pid = $(item).attr('pid');\r\n\t\tvar pname = $(item).attr('pname');\r\n\t\tvar cid = $(item).attr('cid');\r\n\t\tvar cname = $(item).attr('cname');\r\n\t\tif (pid != null && cid != null) {\r\n\t\t\tregionList.push({\r\n\t\t\t\t\"cityId\": cid,\r\n\t\t\t\t\"cityName\": cname,\r\n\t\t\t\t\"provId\": pid,\r\n\t\t\t\t\"provName\": pname\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\treturn regionList;\r\n}\r\n\r\nfunction getSelectAreaIds() {\r\n\tvar regionIdList = [];\r\n\t$('.area-btn').forEach(function (item, index, array) {\r\n\t\tvar pid = $(item).attr('pid');\r\n\t\tvar pname = $(item).attr('pname');\r\n\t\tvar cid = $(item).attr('cid');\r\n\t\tvar cname = $(item).attr('cname');\r\n\t\tif (pid != null && cid != null) {\r\n\t\t\tregionIdList.push(cid);\r\n\t\t}\r\n\t});\r\n\treturn regionIdList.join();\r\n}\r\n\r\nfunction httpGetRegionInfo() {\r\n\r\n\thttpGet('/region',\r\n\t\tnull,\r\n\t\tfunction (response) {\r\n\t\t\t//JSON.stringify\r\n\t\t\tif (response['body']) {\r\n\t\t\t\tregions = (response['body']);\r\n\t\t\t}\r\n\t\t},\r\n\t\tfunction (xhr, type) {\r\n\r\n\t\t});\r\n}\r\n\r\nfunction item_click(item_class, func) {\r\n\t$('.' + item_class).each(function (index) {\r\n\t\t$(this).on('click', function (e) {\r\n\t\t\tif ($(this).hasClass('area-btn')) {\r\n\t\t\t\tconsole.log('area btn!!!!!')\r\n\t\t\t\tvar pid = $(this).attr('pid');\r\n\t\t\t\tvar pname = $(this).attr('pname');\r\n\t\t\t\tvar cid = $(this).attr('cid');\r\n\t\t\t\tvar cname = $(this).attr('cname');\r\n\t\t\t\treturningAreaByDeleteItem(pid, pname, cid, cname);\r\n\t\t\t}\r\n\t\t\telse if ($(this).hasClass('professional-btn')) {\r\n\t\t\t\tconsole.log('professional btn!!!!!')\r\n\t\t\t\tprofessionalListAppend($(this).attr('cid'), $(this).attr('cname'));\r\n\t\t\t}\r\n\t\t\t$(this).closest('div').remove();\r\n\t\t\tfunc();\r\n\t\t});\r\n\t});\r\n}\r\n\r\n\r\nfunction area_number() {\r\n\t$('#area_number').text($('.select-area-item').size() - 2);\r\n}\r\n\r\n\r\nfunction professional_number() {\r\n\r\n\t$('#professional_number').text($('.select-professional-item').size() - 2);\r\n}\r\n\r\nfunction get_area_number() {\r\n\treturn $('.select-area-item').size() - 2;\r\n}\r\n\r\nfunction get_professional_number() {\r\n\treturn $('.select-professional-item').size() - 2;\r\n}\r\n\r\nfunction item_append(type, template_id, item_click_class, item_class, maps, func) {\r\n\tvar item = $('#' + template_id).html();\r\n\r\n\tmaps.forEach(function (value, key, map) {\r\n\t\titem = item.replace(new RegExp(key, \"igm\"), value);\r\n\t});\r\n\t$('.' + item_class).last().after(item);\r\n\titem_click(maps.get('#class'), func);\r\n\tif (type == 'professional') {\r\n\t\t$('.' + maps.get('#class')).attr({ cid: maps.get('#id'), cname: maps.get('#name') });\r\n\t}\r\n\telse if (type == 'area') {\r\n\t\tvar pid = maps.get('#pid');\r\n\t\tvar cid = maps.get('#cid');\r\n\t\tvar cname = maps.get('#cname');\r\n\t\tvar pname = maps.get('#pname');\r\n\t\t$('.' + maps.get('#class')).attr({ pid: pid, cid: cid, cname: cname, pname: pname });\r\n\t\tareaRemoveItem(pid, pname, cid, cname);\r\n\t}\r\n\tfunc();\r\n}\r\n\r\nfunction area_list_click(pid, pname, cid, cname) {\r\n\tvar m = new Map();\r\n\tm.set('#name', pname + ' ' + cname);\r\n\tm.set('#pname', pname);\r\n\tm.set('#cname', cname);\r\n\tm.set('#class', new Date().getTime());\r\n\tm.set('#pid', pid);\r\n\tm.set('#cid', cid);\r\n\titem_append('area', 'area-item-template', 'area-btn', 'select-area-item', m, area_number);\r\n}\r\n\r\nfunction professional_list_click(id, name) {\r\n\tvar m = new Map();\r\n\tm.set('#name', name);\r\n\tm.set('#class', new Date().getTime());\r\n\tm.set('#id', id);\r\n\titem_append('professional', 'professional-item-template', 'professional-btn', 'select-professional-item', m, professional_number);\r\n}\r\n\r\nfunction areaRemoveItem(pid, pname, cid, cname) {\r\n\tfor (let index = 0; index < regions.length; index++) {\r\n\t\tconst region = regions[index];\r\n\t\tif (region['value'] == pid) {\r\n\t\t\t// alert('found' + region['label']);\r\n\t\t\tvar citys = region['children'];\r\n\t\t\tvar cidx = getCityIndex(citys, cid);\r\n\t\t\tif (cidx > -1) {\r\n\t\t\t\tcitys.splice(cidx, 1);\r\n\t\t\t}\r\n\t\t\tif (citys.length < 1) {\r\n\t\t\t\tregions.splice(index, 1)\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\nfunction getCityIndex(citys, cid) {\r\n\tfor (let idx = 0; idx < citys.length; idx++) {\r\n\t\tconst city = citys[idx];\r\n\t\tif (city['value'] == cid) {\r\n\t\t\treturn idx;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\nfunction httpGetInfo(typeId, select) {\r\n\thttpGet('/common',\r\n\t\t{ typeId: typeId },\r\n\t\tfunction (response) {\r\n\t\t\t//JSON.stringify\r\n\t\t\tif (response['body'] && response['body']['typeVals']) {\r\n\t\t\t\t(response['body']['typeVals']).forEach(function (value, index, array) {\r\n\t\t\t\t\t//alert(JSON.stringify(value) + \",\" + JSON.stringify(index) + \",\" + JSON.stringify(array));\r\n\t\t\t\t\t$(\"<option />\", { text: value.valVal, value: value.valId }).appendTo(select);\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tfunction (xhr, type) {\r\n\r\n\t\t});\r\n}\r\n\r\n\r\nfunction getProfessionalIndex(val) {\r\n\tfor (var i = 0; i < professionals.length; i++) {\r\n\t\tif (professionals[i]['label'] == val) return i;\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\nfunction getAreaIndex(pid, pname) {\r\n\tfor (let index = 0; index < regions.length; index++) {\r\n\t\tconst region = regions[index];\r\n\t\tif (region['value'] == pid) {\r\n\t\t\treturn index;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\nfunction professionalOnClick(thisItem, id, label) {\r\n\tprofessional_list_click(id, label);\r\n\t$(thisItem).remove();\r\n}\r\n\r\nfunction returningAreaByDeleteItem(pid, pname, cid, cname) {\r\n\tvar index = getAreaIndex(pid, pname);\r\n\tif (index > -1) {\r\n\t\tvar citys = regions[index]['children'];\r\n\t\tcitys.push({\r\n\t\t\tlabel: cname, value: cid\r\n\t\t});\r\n\t}\r\n\telse {\r\n\t\tregions.push({\r\n\t\t\tlabel: pname,\r\n\t\t\tvalue: pid,\r\n\t\t\tchildren: [{ label: cname, value: cid }]\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction returningProfessionalByDeleteItem(id, label) {\r\n\tprofessionals.push({\r\n\t\tlabel: label,\r\n\t\tonClick: function () { professionalOnClick(id, label) }\r\n\t});\r\n}\r\n\r\nvar index = 0;\r\nfunction professionalListAppend(id, label) {\r\n\tvar tpl = $('#professional-list-template').html();\r\n\tvar idx = index++;\r\n\ttpl = tpl.replace(new RegExp('#id', \"igm\"), idx);\r\n\ttpl = tpl.replace(new RegExp('#name', \"igm\"), label);\r\n\t$('#my-layer-1').append(tpl);\r\n\r\n\t$('#' + idx).on('click', function (e) {\r\n\t\tprofessionalOnClick(this, id, label);\r\n\t});\r\n}\r\n\r\nfunction httpGetProfessionalInfo() {\r\n\thttpGet('/common',\r\n\t\t{ typeId: '2003' },\r\n\t\tfunction (response) {\r\n\t\t\t//JSON.stringify\r\n\t\t\t//return_code: \"SUCCESS\"\r\n\t\t\tif (response['body'] && response['body']['typeVals']) {\r\n\r\n\t\t\t\t(response['body']['typeVals']).forEach(function (value, index, array) {\r\n\r\n\t\t\t\t\t//$(\"<option />\", { text: value.valVal, value: value.valId }).appendTo(select);\r\n\t\t\t\t\t// professionals.push({\r\n\t\t\t\t\t// \tlabel: value.valVal,\r\n\t\t\t\t\t// \tonClick: function () { professionalOnClick(value.valId, value.valVal) }\r\n\t\t\t\t\t// });\r\n\t\t\t\t\tprofessionalListAppend(value.valId, value.valVal);\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tfunction (xhr, type) {\r\n\r\n\t\t});\r\n}\r\n"],"sourceRoot":""}